<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        <!-- Tree View -->
        <record id="custom_view_calendar_event_type_tree" model="ir.ui.view">
            <field name="name">custom.view.calendar.event.type.view</field>
            <field name="model">calendar.event.type</field>
            <field name="inherit_id" ref="calendar.view_calendar_event_type_tree" />
            <field eval="1" name="priority"/>
            <field name="arch" type="xml">
                <xpath expr="//tree/field[@name='name']" position="after">
                    <field string="Code acte" name="x_code_acte"/>
                    <field string="Prix acte" name="x_price_acte"/>
                </xpath>
            </field>
        </record>


        <record id="custom_view_calendar_event_form_popup" model="ir.ui.view">
            <field name="name">custom.view.calendar.event.form.popup</field>
            <field name="model">calendar.event</field>
            <field name="inherit_id" ref="calendar.view_calendar_event_form_popup" />
            <field eval="1" name="priority" />
            <field name="arch" type="xml">
                <xpath expr="//form/group/group/field[@name='partner_ids']" position="attributes">
                    <attribute name="invisible">True</attribute>
                </xpath>
                <xpath expr="//form/group/group/field[@name='location']" position="attributes">
                    <attribute name="invisible">True</attribute>
                </xpath>
                <xpath expr="//form/group/group/field[@name='alarm_ids']" position="attributes">
                    <attribute name="invisible">True</attribute>
                </xpath>
            </field>
        </record>


        <record id="custom_view_calendar_event_form" model="ir.ui.view">
            <field name="name">custom.view.calendar.event.form</field>
            <field name="model">calendar.event</field>
            <field name="inherit_id" ref="calendar.view_calendar_event_form" />
            <field eval="1" name="priority" />
            <field name="arch" type="xml">
                <!-- <xpath expr="//form/sheet/div/h1/field[@name='name']" position="attributes">
                    <attribute name="readonly">True</attribute>
                </xpath> -->
                <xpath expr="//form/sheet/div/h2" position="replace">
                    <h2>
                        <field name="x_partner_id" placeholder="Sélectionner le patient..." string="Patient"/>
                    </h2>
                </xpath>
                <!-- Change Tab string -->
                <xpath expr="//form/sheet/notebook/page[1]" position="attributes">
                    <attribute name="string">Détails du RDV</attribute>
                </xpath>
                <!-- Hide some fileds -->
                <xpath expr="//form/sheet/notebook/page/group/group/field[@name='allday']" position="attributes">
                    <attribute name="invisible">True</attribute>
                </xpath>
                <xpath expr="//form/sheet/notebook/page/group/group/field[@name='alarm_ids']" position="attributes">
                    <attribute name="invisible">True</attribute>
                </xpath>
                <xpath expr="//form/sheet/notebook/page/group/group/field[@name='location']" position="attributes">
                    <attribute name="invisible">True</attribute>
                </xpath>
                <xpath expr="//form/sheet/notebook/page/field[@name='description']" position="attributes">
                    <attribute name="invisible">True</attribute>
                </xpath>
                <xpath expr="//form/sheet/notebook/page/label" position="attributes">
                    <attribute name="invisible">True</attribute>
                </xpath>
                <!-- Change categ_ids string -->
                <xpath expr="//form/sheet/notebook/page/group/group/field[@name='categ_ids']" position="replace">
                    <field name="categ_ids" widget="many2many_tags" string="Type de consult."/>
                </xpath>
                <!-- Add field x_domicile -->
                <xpath expr="//form/sheet/notebook/page/group/group/field[@name='categ_ids']" position="replace">
                    <field name="x_categ_id" string="Type de consult."/>
                    <field name="x_categ_id_char" invisible="1"/>
                    <field name="x_domicile"/>
                </xpath>
                <!-- Hide tabs -->
                <xpath expr="//form/sheet/notebook/page[3]" position="attributes">
                    <attribute name="invisible">True</attribute>
                </xpath>
                <xpath expr="//form/sheet/notebook/page[4]" position="attributes">
                    <attribute name="invisible">True</attribute>
                </xpath>
                <!-- Change Tab string -->
                <xpath expr="//form/sheet/notebook/page[2]" position="attributes">
                    <attribute name="string">Options avancées</attribute>
                </xpath>
                <!-- Add field allday to Tab[2] -->
                <xpath expr="//form/sheet/notebook/page[2]/group/div/group/field[@name='recurrency']" position="after">
                    <field name="allday"  on_change="onchange_allday(start, stop, start_date, stop_date, start_datetime, stop_datetime, allday)" attrs="{'readonly': [('id', '!=', False), ('recurrency','=',True)]}"/>
                </xpath>



                <!-- Add partner info -->
                <xpath expr="//form/sheet/notebook" position="after">
                    <sheet attrs="{'invisible': [('x_event_name','=', False)]}">    
                        <field name="x_event_src_avatar" widget='image' class="oe_avatar"/>
                        <div class="oe_title">
                            <h1>
                                <field name="x_event_name" readonly="1"/>
                            </h1>
                            <h2>
                                <field name="x_event_patient_prenom" readonly="1"/>
                            </h2>
                            <h3>
                                <field name="x_event_phone" readonly="1"/>
                            </h3>
                        </div>

                        <group attrs="{'invisible':[('x_categ_id_char','!=','RP')]}">
                            <field name="x_rp_methode" string="Méthode"/>
                            <field name="x_rp_progression" string="Progression"/>
                        </group>

                        <group attrs="{'invisible': [('x_categ_id_char','!=','Pesée - de 9 semaines'), ('x_categ_id_char','!=','Pesée 9 semaines et +'), ('x_categ_id_char','!=','CSF bébé'), ('x_categ_id_char','!=','CG bébé')]}">
                            <field name="x_bebe_mesures" string="Mesures"/>
                            <group colspan="2"/>
                            <field name="x_bebe_mobilite" string="Mobilité"/>
                            <group colspan="2"/>
                            <field name="x_bebe_exam" string="Examens"/>
                            <group colspan="2"/>
                            <field name="x_event_conduite" string="Conduite à tenir"/>
                            <field name="x_event_traitement" string="Traitement"/>
                            <field name="x_event_bilanbio" string="Bilan bio."/>
                        </group>

                         <group attrs="{'invisible':[('x_categ_id_char','!=','FCU'),('x_categ_id_char','!=','CSF'),('x_categ_id_char','!=','Stérilet'),('x_categ_id_char','!=','Implant')]}">
                            <field name="x_gyneco_motif" string="Motif de consult."/>
                            <group colspan="2"/>
                            <field name="x_gyneco_1" nolabel="1" colspan="2"/>
                            <group colspan="2"/>
                            <field name="x_gyneco_2" nolabel="1" colspan="2"/>
                            <group colspan="2"/>
                            <field name="x_gyneco_3" nolabel="1" colspan="2"/>
                            <group colspan="2"/>
                            <field name="x_gyneco_4" nolabel="1" colspan="2"/>
                            <group colspan="2"/>
                            <field name="x_gyneco_5" nolabel="1" colspan="2"/>
                            <group colspan="2"/>
                            <field name="x_event_conduite" string="Conduite à tenir"/>
                            <field name="x_event_traitement" string="Traitement"/>
                            <field name="x_event_bilanbio" string="Bilan bio."/>
                        </group>

                        <group attrs="{'invisible':[('x_categ_id_char','!=','CG'),('x_categ_id_char','!=','Monito'),('x_categ_id_char','!=','HAD')]}">
                            <field name="x_event_tp" string="TP"/>
                            <field name="x_event_dg" string="DG"/>
                            <field name="x_event_ddr" string="DDR"/>
                            <group colspan="2"/>
                            <field name="x_gross_motif" string="Motif de consult."/>
                            <group colspan="2"/>
                            <field name="x_event_ag" string="AG"/>
                            <group colspan="2"/>
                            <field name="x_gross_1" string=" "/>
                            <group colspan="2"/>
                            <field name="x_gross_2" string="Signes fonctionnels"/>
                            <group colspan="2"/>
                            <field name="x_gross_OMI" string="OMI"/>
                            <group colspan="2"/>
                            <field name="x_gross_tigette" string="Tigette"/>
                            <group colspan="2"/>
                            <field name="x_gross_h_uterine" string="Hauteur utérine"/>
                            <group colspan="2"/>
                            <field name="x_gross_presentation" string="Présentation"/>
                            <group colspan="2"/>
                            <field name="x_gross_3" string="Touché vaginal"/>
                            <group colspan="2"/>
                            <field name="x_event_conduite" string="Conduite à tenir"/>
                            <field name="x_event_traitement" string="Traitement"/>
                            <field name="x_event_bilanbio" string="Bilan bio."/>
                        </group>

                        <group>
                            <field name="x_prepa_note" string="Note"/>
                        </group>

                        <notebook colspan="5">

                            <page name='quest_rp' string="Info. 1ère consult." attrs="{'invisible':[('x_categ_id_char','!=','RP')]}">
                                <field name="x_event_questionnaire_rp" string="Questionnaire"/>
                                <field name="x_event_exam_rp" string="Examen"/>
                            </page>

                            <page name='atcd_obst' string="Ant. obst." attrs="{'invisible':[('x_categ_id_char','!=','RP'),('x_categ_id_char','!=','EPP')]}">
                                <field name="x_event_obstetrique"/>
                            </page>

                            <page name='epp' string="EPP" attrs="{'invisible': [('x_categ_id_char','!=','EPP'), ('x_categ_id_char','!=','Prépa'), ('x_categ_id_char','!=','Prépa groupe - de 4'), ('x_categ_id_char','!=','Prépa groupe 4 et +')]}">
                                <group  col='2'>
                                    <div>
                                        <field name="x_event_atcd_marquants"/>
                                        <field name="x_event_projet_naissance"/>
                                    </div>
                                    <div>
                                        <field name="x_event_contexte_epp"/>
                                        <field name="x_event_ressentis"/>
                                    </div>
                                </group>
                            </page>

                            <page name='vaccins' string="Vaccins" attrs="{'invisible':[('x_categ_id_char','!=','Vaccins'),('x_categ_id_char','!=','Pesée - de 9 semaines'),('x_categ_id_char','!=','CSF bébé'),('x_categ_id_char','!=','Pesée 9 semaines et +'),('x_categ_id_char','!=','CG bébé')]}">
                                <group>
                                    <table colspan="4" class="oe_form_group" style="background-color: #fffafa;">
                                        <tr style="height:27px" class="oe_form_group_row">
                                            <th style="width:16%%; text-align: center">Age approprié</th>
                                            <th style="width:7%%; text-align: center">Naiss.</th>
                                            <th style="width:7%%; text-align: center">2 mois</th>
                                            <th style="width:7%%; text-align: center">4 mois</th>
                                            <th style="width:7%%; text-align: center">11 mois</th>
                                            <th style="width:7%%; text-align: center">12 mois</th>
                                            <th style="width:7%%; text-align: center">16 mois</th>
                                            <th style="width:7%%; text-align: center">6 ans</th>
                                            <th style="width:7%%; text-align: center">11 ans</th>
                                            <th style="width:7%%; text-align: center">14 ans</th>
                                            <th style="width:7%%; text-align: center">25 ans</th>
                                            <th style="width:7%%; text-align: center">45 ans</th>
                                            <th style="width:7%%; text-align: center">+65 ans</th>
                                        </tr>
                                        <tr>
                                        </tr>
                                        <tr class="oe_form_group_row">
                                            <td style="background-color: #ffeff9; vertical-align: middle; text-align: right;">BCG</td>
                                            <td style="text-align: center; background-color: #ffeff9; vertical-align: middle">
                                                <field name="x_event_BCG_N" nolabel="1" style="vertical-align: middle"/>
                                            </td>
                                        </tr>
                                        <tr class="oe_form_group_row">
                                            <td style="background-color: #effff0; vertical-align: middle; text-align: right">DTP</td>
                                            <td>
                                            </td>
                                            <td style="text-align: center; background-color: #effff0; vertical-align: middle">
                                                <field name="x_event_DTP_2m" nolabel="1"/>
                                            </td>
                                            <td style="text-align: center; background-color: #effff0; vertical-align: middle">
                                                <field name="x_event_DTP_4m" nolabel="1"/>
                                            </td>
                                            <td style="text-align: center; background-color: #effff0; vertical-align: middle">
                                                <field name="x_event_DTP_11m" nolabel="1"/>
                                            </td>
                                            <td>
                                            </td>
                                            <td>
                                            </td>
                                            <td style="text-align: center; background-color: #effff0; vertical-align: middle">
                                                <field name="x_event_DTP_6a" nolabel="1"/>
                                            </td>
                                            <td style="text-align: center; background-color: #effff0; vertical-align: middle">
                                                <field name="x_event_DTP_1113a" nolabel="1"/>
                                            </td>
                                            <td>
                                            </td>
                                            <td style="text-align: center; background-color: #effff0; vertical-align: middle">
                                                <field name="x_event_DTP_25" nolabel="1"/>
                                            </td>
                                            <td style="text-align: center; background-color: #effff0; vertical-align: middle">
                                                <field name="x_event_DTP_45" nolabel="1"/>
                                            </td>
                                            <td style="text-align: center; background-color: #effff0; vertical-align: middle; font-size: 10px;">Tous les 10ans</td>
                                        </tr>
                                        <tr class="oe_form_group_row">
                                            <td style="background-color: #effff0; vertical-align: middle; text-align: right">Coqueluche</td>
                                            <td>
                                            </td>
                                            <td style="text-align: center; background-color: #effff0; vertical-align: middle">
                                                <field name="x_event_coq_2m" nolabel="1"/>
                                            </td>
                                            <td style="text-align: center; background-color: #effff0; vertical-align: middle">
                                                <field name="x_event_coq_4m" nolabel="1"/>
                                            </td>
                                            <td style="text-align: center; background-color: #effff0; vertical-align: middle">
                                                <field name="x_event_coq_11m" nolabel="1"/>
                                            </td>
                                            <td>
                                            </td>
                                            <td>
                                            </td>
                                            <td style="text-align: center; background-color: #effff0; vertical-align: middle">
                                                <field name="x_event_coq_6a" nolabel="1"/>
                                            </td>
                                            <td style="text-align: center; background-color: #effff0; vertical-align: middle">
                                                <field name="x_event_coq_1113a" nolabel="1"/>
                                            </td>
                                            <td>
                                            </td>
                                            <td style="text-align: center; background-color: #effff0; vertical-align: middle">
                                                <field name="x_event_coq_25" nolabel="1"/>
                                            </td>
                                        </tr>
                                        <tr class="oe_form_group_row">
                                            <td style="background-color: #effff0; vertical-align: middle; text-align: right">HIB</td>
                                            <td></td>
                                            <td style="text-align: center; background-color: #effff0; vertical-align: middle">
                                                <field name="x_event_HIB_2m" nolabel="1"/>
                                            </td>
                                            <td style="text-align: center; background-color: #effff0; vertical-align: middle">
                                                <field name="x_event_HIB_4m" nolabel="1"/>
                                            </td>
                                            <td style="text-align: center; background-color: #effff0; vertical-align: middle">
                                                <field name="x_event_HIB_11m" nolabel="1"/>
                                            </td>
                                        </tr>
                                        <tr class="oe_form_group_row">
                                            <td style="background-color: #ffffe6; vertical-align: middle; text-align: right">Hépatite B</td>
                                            <td></td>
                                            <td style="text-align: center; background-color: #ffffe6; vertical-align: middle">
                                                <field name="x_event_HepB_2m" nolabel="1"/>
                                            </td>
                                            <td style="text-align: center; background-color: #ffffe6; vertical-align: middle">
                                                <field name="x_event_HepB_4m" nolabel="1"/>
                                            </td>
                                            <td style="text-align: center; background-color: #ffffe6; vertical-align: middle">
                                                <field name="x_event_HepB_11m" nolabel="1"/>
                                            </td>
                                        </tr>
                                        <tr class="oe_form_group_row">
                                            <td style="background-color: #ffe6f9; vertical-align: middle; text-align: right">Pneumocoque</td>
                                            <td></td>
                                            <td style="text-align: center; background-color: #ffe6f9; vertical-align: middle">
                                                <field name="x_event_pneumo_2m" nolabel="1"/>
                                            </td>
                                            <td style="text-align: center; background-color: #ffe6f9; vertical-align: middle">
                                                <field name="x_event_pneumo_4m" nolabel="1"/>
                                            </td>
                                            <td style="text-align: center; background-color: #ffe6f9; vertical-align: middle">
                                                <field name="x_event_pneumo_11m" nolabel="1"/>
                                            </td>
                                        </tr>
                                        <tr class="oe_form_group_row">
                                            <td style="background-color: #ffe6f9; vertical-align: middle; text-align: right">Méningicoque C</td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td style="text-align: center; background-color: #ffe6f9; vertical-align: middle">
                                                <field name="x_event_meningo_11m" nolabel="1"/>
                                            </td>
                                        </tr>
                                        <tr class="oe_form_group_row">
                                            <td style="background-color: #ffb3b3; vertical-align: middle; text-align: right">ROR</td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td style="text-align: center; background-color: #ffb3b3; vertical-align: middle">
                                                <field name="x_event_ROR_12m" nolabel="1"/>
                                            </td>
                                            <td style="text-align: center; background-color: #ffb3b3; vertical-align: middle">
                                                <field name="x_event_ROR_1618m" nolabel="1"/>
                                            </td>
                                        </tr>
                                        <tr class="oe_form_group_row">
                                            <td style="background-color: #ffebcc; vertical-align: middle; text-align: right">HPV</td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td style="text-align: center; background-color: #ffebcc; vertical-align: middle">
                                                <field name="x_event_HPV_1113m" nolabel="1"/>
                                            </td>
                                            <td style="text-align: center; background-color: #ffebcc; vertical-align: middle">
                                                <field name="x_event_HPV_14m" nolabel="1"/>
                                            </td>
                                        </tr>
                                        <tr class="oe_form_group_row">
                                            <td style="background-color: #eff2ff; vertical-align: middle; text-align: right; margin-right: 2">Grippe</td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td style="text-align: center; background-color: #eff2ff; vertical-align: middle; font-size: 10px;">Tous les 10ans</td>
                                        </tr>
                                    </table>
                                </group>
                            </page>
                            <page name='atcd_gyneco' string="Ant. gynéco." attrs="{'invisible':[('x_categ_id_char','!=','FCU'),('x_categ_id_char','!=','CSF'),('x_categ_id_char','!=','Stérilet'),('x_categ_id_char','!=','Implant')]}">
                                <field name="x_event_gyneco"/>
                            </page>
                        </notebook>


                        <!-- <group attrs="{'invisible':[('x_categ_id_char','!=','FCU'),('x_categ_id_char','!=','CSF'),('x_categ_id_char','!=','Stérilet'),('x_categ_id_char','!=','Implant')]}">
                            <group>
                                <field name="x_gyneco_motif"/>
                            </group>
                            <group>
                            </group>
                            <span></span>
                            <span></span>
                            <group>
                                <field name="x_gyneco_1" nolabel="1"/>
                            </group>
                            <group>
                                <field name="x_gyneco_2" nolabel="1"/>
                            </group>
                            <group>
                                <span></span>
                            </group>
                            <group>
                                <span></span>
                            </group>
                            <group>
                                <field name="x_gyneco_3" nolabel="1"/>
                            </group>
                            <group>
                                <field name="x_gyneco_4" nolabel="1"/>
                            </group>
                            <group>
                                <span></span>
                            </group>
                            <group>
                                <span></span>
                            </group>
                            <group>
                                <field name="x_gyneco_5" nolabel="1"/>
                            </group>
                            <group>
                                <field name="x_gyneco_6" nolabel="1"/>
                            </group>
                        </group> -->
                    </sheet>
                </xpath>



                <!-- hide note and twitter -->
                <xpath expr="//form/div[@class='oe_chatter']" position="replace">
                    
                </xpath>
            </field>
        </record>
    </data>
</openerp>
